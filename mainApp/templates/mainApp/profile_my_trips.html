{% extends "mainApp/profile.html" %}
{% load static %}
{% block content %}

<div class="main-wrapper search-tickets-section ">

    {% if trips %}
      {% for trip_data in trips %}
        {% with trip=trip_data.trip route_list=trip_data.routes %}
          <div class="detail-trip-container">
            {% if trip.has_eticket %}
              <span type="eticket" class="badge-info">
                Без роздруковування
              </span>
            {% endif %}

            <div class="detail-trip-item">
              <div class="detail-trip-subtitle carrier-mobile">
                {{ trip.carrier }}
              </div>

              <div class="detail-trip-wrapper">
                <div class="detail-trip-wrapper-col-left">
                  <div class="detail-trip-grid">
                    <div class="detail-trip-item-col">
                      <div class="flex-start">
                        <div class="detail-trip-title">
                          {{ route_list.0.route.departure_datetime|date:"H:i" }}
                        </div>
                     {% with first_route=route_list|first %}
                          <div class="detail-trip-grey-title">
                            {{ first_route.duration }}
                          </div>
                        {% endwith %}
                      </div>
                      <div class="detail-trip-subtitle">
                        {{ route_list.0.route.from_city }}, {{ route_list.0.route.from_place }}
                      </div>
                    </div>
                    <div class="detail-trip-item-col">
                      <div class="detail-trip-title">
                       {% with last_route=route_list|last %}
                          {% if last_route %}
                            {{ last_route.route.arrival_datetime|date:"H:i" }}
                          {% endif %}
                        {% endwith %}
                      </div>
                      <div class="detail-trip-subtitle">
                        {% with last_route=route_list|last %}
                           {% if last_route %}
                             {{ last_route.route.to_city }}, {{ last_route.route.to_place }}
                          {% endif %}
                          {% endwith %}
                      </div>
                    </div>
                  </div>
                  <div class="detail-trip-grey-segment">
                    <div class="detail-trip-subtitle red-title">
                      <i class="fas fa-chevron-down" style="color: red; margin-right: 5px;"></i> Детальніше:
                    </div>
                    <div class="detail-trip-subtitle">
                      Перевізник: {{ trip.carrier }}
                    </div>
                    <div class="detail-trip-subtitle">
                      <i class="fas fa-camera" style="color: red; margin-right: 5px;"></i> Автобус: {{ trip.bus_description }}
                    </div>
                  </div>
                </div>

                <div class="detail-trip-wrapper-col-right">
                  <div class="vertical-dashed-line"></div>
                  <div class="detail-trip-grid flex-column">
                    <div class="detail-trip-grey-title">Відправлення:</div>
                    {% with last_route=route_list|last %}
                      <div>{{ last_route.route.departure_datetime }}</div>
                    {% endwith %}
                    <div class="detail-trip-grey-title">Прибуття:</div>
                    {% with last_route=route_list|last %}
                         <div>{{ last_route.route.arrival_datetime }}</div>
                    {% endwith %}

                    <div ><span class="detail-trip-grey-title">Кількість пасажирів:</span>{{ trip_data.count_passenger }}</div>
                  </div><div  class="detail-trip-grey-segment ">
                                    <div class="trip-icons">
                                        {% if trip.has_air_conditioning %}
                                      <i class="fas fa-fan" title="Кондиціонер"></i>
                                        {% endif %}
                                        {% if trip.has_wifi %}
                                      <i class="fas fa-wifi" title="Wi-Fi"></i>
                                         {% endif %}
                                        {% if trip.has_paid_socket %}
                                      <i class="fas fa-plug" title="Розетка (платно)"></i>
                                         {% endif %}
                                        {% if trip.has_free_socket %}
                                      <i class="fas fa-plug" title="Розетка (безкоштовно)"></i>
                                         {% endif %}
                                        {% if trip.has_seat_belts %}
                                      <i class="fas fa-user-shield" title="Ремені безпеки"></i>
                                         {% endif %}
                                        {% if trip.has_wc %}
                                       <span class="wc-icon" title="Туалет">WC</span>
                                         {% endif %}
                                    </div>
                                </div>

                </div>
              </div>
            </div>
          </div>
        {% endwith %}
     {% endfor %}
    {% else %}
      <div class="detail-trip-item">
        <p>  У вас поки немає майбутніх поїздок, {{ user.username }}.</p>
      </div>
    {% endif %}
</div>



{% endblock content %}
